<!Doctype html>
<html>
	<head>
		<title> Tic Tac Toe </title>
		<link link rel="stylesheet" href="table_style.css">
		<meta charset="windows-1252">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	</head>
	<body>
		
		<h1>Tic ~ Tac ~ Toe</h1>
		<div id="p1">
			<h2>Player 1</h2>
			<h3 style="display:inline;float:left;">Win : </h3> <h3 id="p1_win" style="display:inline; float:right;">0</h3></br>
			<h3 style="display:inline;float:left;">Lost : </h3> <h3 id="p1_lost" style="display:inline; float:right;">0</h3></br>
			<h3 style="display:inline;float:left;">Tie : </h3> <h3 id="p1_tie" style="display:inline; float:right;">0</h3>
		</div>
		<div id="p2">
			<h2>Player 2</h2>
			<h3 style="display:inline;float:left;">Win : </h3> <h3 id="p2_win" style="display:inline; float:right;">0</h3></br>
			<h3 style="display:inline;float:left;">Lost : </h3> <h3 id="p2_lost" style="display:inline; float:right;">0</h3></br>
			<h3 style="display:inline;float:left;">Tie : </h3> <h3 id="p2_tie" style="display:inline; float:right;">0</h3>
		</div>
		<div id="board">
			<table id="table" width="20%" align="center">
				<tr>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</table>
		</div>
		<script type="text/javascript">
			var table = document.getElementById("table"),rIndex,cIndex;
			var select_p=1,p1_win=0,p2_win=0;
			var p1_win_count =0, p1_lost_count =0, p1_tie_count =0;
			var p2_win_count =0, p2_lost_count =0, p2_tie_count =0;
			var full=0;
			var block = new Array(3);
			for(var i=0;i<3;i++)
			{
				block[i] = new Array(3);
			}
			for(var i=0;i<3;i++)
			{
				for(var j=0;j<3;j++)
				{
					block[i][j]=0;
				}
			}
			for(var i=0; i<table.rows.length; i++)
			{
				for(var j=0; j<table.rows[i].cells.length;j++)
				{
					table.rows[i].cells[j].onclick = function()
					{
						rIndex = this.parentElement.rowIndex;
						cIndex = this.cellIndex;
						//console.log(rIndex+" "+cIndex);
						if(select_p==1 && block[rIndex][cIndex]==0)
						{
							table.rows[rIndex].cells[cIndex].style.background = '#C70039';
							p1();
							full++;
							select_p = 2;
							if(p1_win)
							{
								alert("Player 1 win");
								p1_win_count++;
								p2_lost_count++;
								reset();
							}
						}
						else if(select_p==2 && block[rIndex][cIndex]==0)
						{
							table.rows[rIndex].cells[cIndex].style.background = '#FFC300';
							p2();
							full++;
							select_p = 1;
							if(p2_win)
							{
								alert("Player 2 win");
								p2_win_count++;
								p1_lost_count++;
								reset();
							}
						}
						if(full==9)
						{
							alert("Match Tie");
							p1_tie_count++;
							p2_tie_count++;
							reset();
						}
					}
				}
			}
			function p1()
			{
				block[rIndex][cIndex] = 1111;
				if(block[0][0]==1111 && block[0][1]==1111 && block[0][2]==1111)
				{
					p1_win=1;
				}
				else if(block[1][0]==1111 && block[1][1]==1111 && block[1][2]==1111)
				{
					p1_win=1;
				}
				else if(block[2][0]==1111 && block[2][1]==1111 && block[2][2]==1111)
				{
					p1_win=1;
				}
				else if(block[0][0]==1111 && block[1][0]==1111 && block[2][0]==1111)
				{
					p1_win=1;
				}
				else if(block[0][1]==1111 && block[1][1]==1111 && block[2][1]==1111)
				{
					p1_win=1;
				}
				else if(block[0][2]==1111 && block[1][2]==1111 && block[2][2]==1111)
				{
					p1_win=1;
				}
				else if(block[0][0]==1111 && block[1][1]==1111 && block[2][2]==1111)
				{
					p1_win=1;
				}
				else if(block[0][2]==1111 && block[1][1]==1111 && block[2][0]==1111)
				{
					p1_win=1;
				}
			}
			function p2()
			{
				block[rIndex][cIndex] = 2222;
				if(block[0][0]==2222 && block[0][1]==2222 && block[0][2]==2222)
				{
					p2_win=1;
				}
				else if(block[1][0]==2222 && block[1][1]==2222 && block[1][2]==2222)
				{
					p2_win=1;
				}
				else if(block[2][0]==2222 && block[2][1]==2222 && block[2][2]==2222)
				{
					p2_win=1;
				}
				else if(block[0][0]==2222 && block[1][0]==2222 && block[2][0]==2222)
				{
					p2_win=1;
				}
				else if(block[0][1]==2222 && block[1][1]==2222 && block[2][1]==2222)
				{
					p2_win=1;
				}
				else if(block[0][2]==2222 && block[1][2]==2222 && block[2][2]==2222)
				{
					p2_win=1;
				}
				else if(block[0][0]==2222 && block[1][1]==2222 && block[2][2]==2222)
				{
					p2_win=1;
				}
				else if(block[0][2]==2222 && block[1][1]==2222 && block[2][0]==2222)
				{
					p2_win=1;
				}
			}
			function reset()
			{
				select_p=1; p2_win=0; p1_win=0; full=0;
				
				document.getElementById("p1_win").innerHTML = p1_win_count;
				document.getElementById("p1_lost").innerHTML = p1_lost_count;
				document.getElementById("p1_tie").innerHTML = p1_tie_count;
				
				document.getElementById("p2_win").innerHTML = p2_win_count;
				document.getElementById("p2_lost").innerHTML = p2_lost_count;
				document.getElementById("p2_tie").innerHTML = p2_tie_count;
				
				
				
				for(var i=0;i<3;i++)
				{
					for(var j=0;j<3;j++)
					{
						block[i][j]=0;
					}
				}
				for(var i=0; i<table.rows.length; i++)
				{
					for(var j=0; j<table.rows[i].cells.length;j++)
					{
						table.rows[i].cells[j].style.background = '#ffffff';
					}
				}
			}
			
		</script>
		
		
	</body>
</html>

